!function(){var a,b,c=1800,d=[{name:"Runningbyrd Tea Company","class":"rbt",pic:"assets/pics/byrd.png",workURL:"http://runningbyrdteacompany.com/",r:60},{name:"wherethefuckisreade.com","class":"where-is-reade",pic:"assets/pics/location-pin.png",workURL:"http://wherethefuckisreade.com/",r:60},{name:"Graph Tool","class":"grapher",pic:"assets/pics/line.svg",workURL:"grapher/grapher.html",r:60},{name:"Resume","class":"resume",pic:"assets/pics/resume.svg",workURL:"assets/resume.pdf",r:60},{name:"Reade Lobdill Design","class":"reade",pic:"assets/pics/logo.png",fixed:!0,r:75,x:$(window).width()/2,y:$(window).height()/2}],e=[{source:4,target:0},{source:4,target:1},{source:4,target:2},{source:4,target:3}];$(document).ready(function(){a=d3.select("#bubbles").append("svg:svg").attr("id","canvas").attr("width",$(window).width()).attr("height",$(window).height()),b=d3.layout.force().nodes(d).links(e).linkDistance(200).size([$(window).width(),$(window).height()]).friction(.7).gravity(.001).charge(3*-c).on("tick",i).start();var g=a.selectAll(".link").data(e);g.enter().append("svg:line").style("stroke-width","2px").style("stroke","black").attr("class","link");var j=a.selectAll(".node").data(d).enter().append("g").attr("class",function(a){return"node "+a.class}).on("click",f).call(b.drag);j.append("svg:circle").style("fill","white").attr("r",function(a){return a.r}),j.append("image").attr("xlink:href",function(a){return a.pic}).attr("x",function(a){return-a.r/1.35}).attr("y",function(a){return-a.r/1.35}).attr("width",function(a){return 1.5*a.r}).attr("height",function(a){return 1.5*a.r}),j.append("text").text(function(a){return a.name}).attr("y",function(a){return a.r+10}).attr("x",function(){return-$(this).width()/2}),$(window).on("resize",h)});var f=function(a){"reade"!==a.class&&($("#iframe").css("background-image","url('assets/pics/loading.gif')"),$("#work-title").text(a.name),$("text").attr("class","grouped"),$(window).off("resize"),b.stop(),d3.select("#canvas").transition().duration(750).attr("height",120).each("end",function(){$("#iframe").attr("src",a.workURL)}),d3.select(this).transition().duration(750).attr("transform","translate(400,60)"),d3.selectAll(".node:not(."+a.class+")").transition().duration(750).attr("transform","translate(100,60)"),d3.selectAll(".link").transition().duration(750).attr("x1",function(){return 60}).attr("y1",function(){return 60}).attr("x2",function(){return 400}).attr("y2",function(){return 60}),$(".reade").one("click mousedown.drag",g),$("#iframe").one("load",function(){$(this).css("background-image","")}))},g=function(){$("#iframe").attr("src",""),$("#work-title").text(a.select(".reade").data()[0].name),$(window).on("resize",h),d3.select("#canvas").transition().duration(750).attr("height",$(window).height()).each("end",function(){$("text").attr("class",""),b.resume()});$(window).height()/2,$(window).width()/2;d3.selectAll(".node").transition().duration(750).attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),d3.selectAll(".link").transition().duration(750).attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y})},h=function(){var c=$(this).height(),d=$(this).width();a.attr("width",d).attr("height",c),b.nodes()[b.nodes().length-1].px=d/2,b.nodes()[b.nodes().length-1].py=c/2,console.log("RESIZE")},i=function(){a.selectAll(".link").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),a.selectAll(".node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"})}}();